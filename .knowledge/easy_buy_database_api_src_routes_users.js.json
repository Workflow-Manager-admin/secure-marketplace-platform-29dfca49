{"is_source_file": true, "format": "JavaScript (Node.js / Express.js)", "description": "This file defines Express routes for user-related operations, including fetching and updating the current user's profile, uploading profile images, and fetching public user profiles by ID.", "external_files": ["../middleware/auth", "../utils/db", "../middleware/upload"], "external_methods": ["requireAuth", "getPool", "upload.single"], "published": [], "classes": [], "methods": [{"name": "GET /api/users/me", "description": "Fetches current authenticated user's profile details such as id, username, email, display name, profile image URL, and creation date."}, {"name": "POST /api/users/me/image", "description": "Uploads a new profile image for the current user with validation for file type and size, replaces previous image if applicable, and updates the user's profile image URL in the database."}, {"name": "PUT /api/users/me", "description": "Updates current user's display name and/or profile image URL."}, {"name": "GET /api/users/:id", "description": "Retrieves public profile information of a user by their ID, excluding sensitive fields."}], "calls": ["getPool()", "pool.query()", "fs.unlinkSync()", "fs.existsSync()", "requireAuth()", "upload.single()"], "search-terms": ["users.js", "user profile routes", "profile image upload", "user profile update", "public user profile"], "state": 2, "file_id": 18, "knowledge_revision": 50, "git_revision": "72e928d39fe9e503bf9e6dd2688571c88751d9dd", "revision_history": [{"37": ""}, {"48": "554b390c6274c17ec3ba432fc72139a2872e4b98"}, {"50": "72e928d39fe9e503bf9e6dd2688571c88751d9dd"}], "ctags": [{"_type": "tag", "name": "express", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/users.js", "pattern": "/^const express = require('express');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/users.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/users.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/users.js", "pattern": "/^const router = express.Router();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "upload", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/users.js", "pattern": "/^const upload = require('..\\/middleware\\/upload');$/", "language": "JavaScript", "kind": "constant"}], "hash": "1932d1890d5e26110fed1def234be9df", "format-version": 4, "code-base-name": "easy_buy_database", "filename": "easy_buy_database/api/src/routes/users.js"}