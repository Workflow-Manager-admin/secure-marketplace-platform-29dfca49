{"is_source_file": true, "format": "JavaScript (Node.js, Express)", "description": "This file defines Express routes for managing products in an e-commerce platform, including CRUD operations, image uploads, and image retrieval.", "external_files": ["../middleware/auth", "../utils/db", "../middleware/upload"], "external_methods": ["requireAuth", "getPool", "upload.imageUpload"], "published": ["router"], "classes": [], "methods": [{"name": "GET /api/products", "description": "Fetches all active products, with seller info, ordered by creation date."}, {"name": "GET /api/products/:id", "description": "Fetches details for a specific product along with its images."}, {"name": "POST /api/products", "description": "Creates a new product; user must be authenticated."}, {"name": "PUT /api/products/:id", "description": "Updates a product if the authenticated user is the seller."}, {"name": "DELETE /api/products/:id", "description": "Deletes a product if the authenticated user is the seller."}, {"name": "POST /api/products/:id/images", "description": "Uploads images for a product, enforcing file type and size restrictions, only if the user is the seller."}, {"name": "GET /api/products/:productId/images/:imageId", "description": "Serves a specific product image by ID, with support for JPEG and PNG types."}], "calls": ["getPool()", "pool.query(...)", "res.json(...)", "res.status(...).json(...)", "fs.existsSync(...)", "fs.unlinkSync(...)", "res.sendFile(...)"], "search-terms": ["product routes", "image upload", "product CRUD", "product images", "express-validator"], "state": 2, "file_id": 17, "knowledge_revision": 51, "git_revision": "554b390c6274c17ec3ba432fc72139a2872e4b98", "revision_history": [{"35": ""}, {"51": "554b390c6274c17ec3ba432fc72139a2872e4b98"}], "ctags": [{"_type": "tag", "name": "MAX_FILES", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const MAX_FILES = 5;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "MAX_SIZE", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const MAX_SIZE = 2 * 1024 * 1024;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allowedTypes", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const allowedTypes = ['image\\/jpeg', 'image\\/png'];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "express", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const express = require('express');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fs", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const fs = require('fs');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageUpload", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const imageUpload = upload.imageUpload;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const path = require('path');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const router = express.Router();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "upload", "path": "/home/kavia/workspace/code-generation/secure-marketplace-platform-29dfca49/easy_buy_database/api/src/routes/products.js", "pattern": "/^const upload = require('..\\/middleware\\/upload');$/", "language": "JavaScript", "kind": "constant"}], "hash": "5b13bacfb3670a2d93f3e1856639f7e0", "format-version": 4, "code-base-name": "easy_buy_database", "filename": "easy_buy_database/api/src/routes/products.js"}